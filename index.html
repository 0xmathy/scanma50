<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Screener — Scan MA50 v1.2 (data.json)</title>
<style>
  :root{
    --bg:#0b0d12;--panel:#0f1320;--panel-2:#121727;--text:#e6edf3;--muted:#9aa4b2;--green:#29d397;--red:#ff6b6b;--amber:#ffc857;--blue:#6aa7ff;--card:#0c111b;--outline:#1e2a44;
  }
  body{margin:0;background:linear-gradient(180deg,#0a0d16,#0b0d12);color:var(--text);font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
  .wrap{max-width:1200px;margin:32px auto;padding:0 16px}
  header{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:16px}
  .title{font-weight:700;font-size:22px}
  .toolbar{display:flex;gap:10px;flex-wrap:wrap}
  .toolbar input,.toolbar select{background:var(--panel-2);color:var(--text);border:1px solid var(--outline);border-radius:10px;padding:8px 10px}
  .note{color:var(--muted);font-size:12px;margin-top:4px}
  .table-wrap{background:var(--panel);border:1px solid var(--outline);border-radius:14px;overflow:hidden;box-shadow:0 10px 24px rgba(0,0,0,.35)}
  table{width:100%;border-collapse:collapse}
  thead th{position:sticky;top:0;background:linear-gradient(180deg,var(--panel),var(--panel-2));color:#cfe0ff;text-align:left;font-weight:600;font-size:12px;text-transform:uppercase;letter-spacing:.5px;border-bottom:1px solid var(--outline);padding:12px 10px;cursor:pointer}
  tbody td{padding:12px 10px;border-bottom:1px solid #0f1422}
  tbody tr:hover{background:rgba(255,255,255,.03)}
  .token{display:flex;align-items:center;gap:10px}
  .logo{width:20px;height:20px;border-radius:6px;background:linear-gradient(135deg,#1e2440,#2c3f6b)}
  .sym{font-weight:700}
  .muted{color:var(--muted)}
  .num{font-variant-numeric:tabular-nums}
  .pos{color:var(--green)}
  .neg{color:var(--red)}
  .t-good{color:var(--green)} .t-warn{color:var(--amber)} .t-bad{color:var(--red)}
  #popover{position:fixed;left:0;top:0;transform:translate(-9999px,-9999px);min-width:400px;max-width:500px;border:1px solid var(--outline);background:var(--card);border-radius:14px;box-shadow:0 20px 40px rgba(0,0,0,.55);padding:14px;z-index:1000;display:none}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">Scan MA50 v1.2 — Screener (via data.json)</div>
      <div class="toolbar">
        <input id="search" placeholder="Rechercher un token…" />
      </div>
    </header>
    <div class="note">Données chargées depuis <code>data.json</code></div>
    <div class="table-wrap">
      <table id="screener">
        <thead>
          <tr>
            <th>Token</th>
            <th>Prix</th>
            <th>Δ24h</th>
            <th>Δ7j</th>
            <th>Δ30j</th>
            <th>MC</th>
            <th>TVL</th>
            <th>MC/TVL</th>
            <th>Vol/MC (24h)</th>
            <th>Moy Vol7j/MC</th>
            <th>Var Vol 7j/30j</th>
            <th>RSI D</th>
            <th>RSI H4</th>
            <th>ATH</th>
            <th>Potentiel x</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
  <div id="popover"></div>
<script>
async function loadData(){
  const res = await fetch('data.json');
  const json = await res.json();
  const tbody = document.querySelector('#screener tbody');
  tbody.innerHTML = '';
  json.tokens.forEach(t=>{
    const tr=document.createElement('tr');
    tr.innerHTML = `
      <td><div class="token"><div class="logo"></div><div><span class="sym">${t.symbol}</span><span class="muted"> · ${t.venue||''}</span></div></div></td>
      <td class="num">$${t.price}</td>
      <td class="num">${t.d24}%</td>
      <td class="num">${t.d7}%</td>
      <td class="num">${t.d30}%</td>
      <td class="num">$${t.mc}</td>
      <td class="num">${t.tvl?`$${t.tvl}`:'N/D'}</td>
      <td class="num">${t.mc_tvl||'—'}</td>
      <td class="num">${t.vol_mc_24}%</td>
      <td class="num">${t.vol7_mc}%</td>
      <td class="num">${t.var_vol_7_over_30}</td>
      <td class="num">${t.rsi_d}</td>
      <td class="num">${t.rsi_h4}</td>
      <td class="num">$${t.ath}</td>
      <td class="num">x${t.ath_mult}</td>`;
    tbody.appendChild(tr);
  });
}
loadData();
</script>
</body>
</html>
